# 绝世好医H5接入文档

绝世好医HTML5版本是基于绝世好医API接口开发的前端应用, 便于第三方合作伙伴快速在客户端或微信中接入绝世好医的服务.

访问地址：http://mydoctor.valurise.com/web/start-md?cid={绝世好医客户ID}&uid={用户ID}&ts={当前时间戳(毫秒)}&_sign={MD5签名}



| 参数名    | 含义    | 备注                                   | 是否必要 |
| ------ | ----- | ------------------------------------ | ---- |
| cid    | 客户ID  | 需申请                                  | 是    |
| uid    | 用户ID  | 调用方用户ID                              | 是    |
| ts     | 时间戳   | 毫秒                                   | 是    |
| _sign  | MD5签名 | 签名生成策略：md5hex(cid+uid+密钥+ts)，其中密钥需申请 | 是    |
| sex    | 性别    | 1：男 ， 2：女                            | 否    |
| birth  | 生日    | 格式：yyyy-MM-dd，如:1980-05-10           | 否    |
| height | 身高    | 单位：厘米                                | 否    |
| weight | 体重    | 单位：公斤                                | 否    |
| locale | 语言    | 中文：zh_CN, 英文: en_US, 默认为中文           | 否    |


### 获取历史问诊结果

1\. 实时推送

数据以JSON格式封装，通过POST方式发送到接口调用方提供的URL，返回http code为200，表示推送成功。

另外，请求会附加URI参数sign，该参数用来校验请求有效性，sign=md5hex(json数据+密钥)

```
POST http://xxxx.com/xxx?sign=xxxxx
```

推送数据样例：

```
{
  "userId": “test”, //用户编号
  "createTime": "1471514827953",  //问诊开始时间
  "symptomName": "咳嗽",  //症状名称
  "sid": "14715148279489432",  //问诊服务号
  "symptomId": "211",  //症状编号
  "conclusionList": [ //结论列表
        {
            "emergencyLevel": 8, //紧急程度（最高为1）
            "suggests": [
                "喝些清淡的饮品，比如水、淡茶、软饮料、无咖啡因的运动饮料、肉汤，或者在嘴里含些冰块或冰棒。",
                "在等待与医生见面的过程中，建议您可以：",
                "如果症状持续或加重，或出现新的症状，请拨打健康热线或联系医生获得进一步的建议。",
                "请保持静养，避免活动。",
                "使用凉雾加湿器。",
                "当要去医生处就诊时，建议向服务台要一个口罩或自己准备一个口罩戴上。",
                "确保家中没有引发咳嗽的刺激物，例如吸烟或壁炉产生的烟雾。",
                "及时对儿童和成人接种疫苗，可保护他们免受严重的、潜在致命疾病的侵袭。有些疫苗是不会终身免疫的，所以注射加强针对于维持足够的免疫力是很有必要的。",
                "少食多餐，或每顿饭的间隔时间不超过3小时。"
            ], //建议
            "content": "百日咳的典型症状是一阵长时间的咳嗽，接着大口喘气，听起来就像是在呐喊。一段长时间的咳嗽后也可能会出现呕吐。百日咳是一种在起初时很像普通的感冒的病毒性感染，但一至两周后咳嗽变得湿润，并有浓厚的粘液。长时间的咳嗽让人十分痛苦。如果不进行治疗，感染会持续至少6周，且可能需要3个月才能完全消除。 如果能及早使用抗生素治疗可能会有所帮助，并且可能缩短病程。处方药也可用于治疗咳嗽。",  //结论描述
            "departInfo": "呼吸内科",  //推荐挂号科室
            "title": "症状提示有百日咳",  //结论概述
            "departments": [
                "呼吸内科"
            ], //推荐挂号科室(数组)
            "actionType": "hospital", //建议采取行动的类型, home：在家静养，nurse：咨询专业护士，hospital：医院就诊，emergency：急救
            "actionTime": "24 hours", //建议采取行动的时间
            "actionLabel": “请在24小时内前往社区卫生服务中心就医" //建议采取的行动
        },
        ...
    ]
}
```

2\. 主动拉取

推送失败的数据可以通过主动请求的方式获取到，数据保存24小时，每条数据只能拉取一次。

每次请求返回最多100条数据。

- 请求地址：http://mydoctor.valurise.com/apis/fetchData

- 请求方式：POST

- URI入参：http://request_url?_cid=xxx&_ts=xxx&_sign=xxx


| 参数名   | 含义    | 备注                                       |
| ----- | ----- | ---------------------------------------- |
| _cid  | 客户ID  | 需申请                                      |
| _ts   | 时间戳   | 毫秒                                       |
| _sign | MD5签名 | 签名生成策略：md5hex(_cid=xxx&_ts=xxx密钥)，其中密钥需申请 |

  ​

- 返回：JSON数组，数据结构同实时推送的数据










